================================================================================
NYC ODCV PROSPECTOR - BUILDING REPORT DOCUMENTATION
================================================================================

OVERVIEW
--------
Individual building report pages generated by building.py provide comprehensive 
energy efficiency analysis for 585+ NYC commercial buildings. Each report serves 
as a detailed sales tool showcasing ODCV savings opportunities, compliance status, 
and building characteristics through interactive visualizations and real-time data.

================================================================================
1. REPORT STRUCTURE & LAYOUT
================================================================================

HEADER SECTION
--------------
• R-Zero logo and branding (links to rzero.com)
• Page title format: "[Address] - ODCV Analysis (v[timestamp])"
• Blue gradient background from R-Zero brand assets
• Back navigation link to homepage

BUILDING IDENTITY BAR
--------------------
• Neighborhood badge (e.g., "Upper East Side-Carnegie Hill")
• Building statistics row:
  - Number of floors
  - Year built/altered
  - Building class (A/B/C/D)
  - Green ratings (LEED/Energy Star certifications)

TITLE SECTION
------------
• Building address and name prominently displayed
• Key metrics showcase:
  - Total Year One Savings (ODCV + LL97 penalty avoidance)
  - Building rank (#1-585)
  - Sales readiness score (0-110 points)
• Penalty breakdown tooltip on hover (if applicable)

================================================================================
2. VISUAL MEDIA CAROUSEL
================================================================================

PURPOSE
-------
Provides visual context through building imagery and aerial footage

CAROUSEL CONTENTS (in order)
---------------------------
1. Street View Image
   - 70x70px thumbnail from GitHub repository
   - Fallback placeholder if unavailable

2. Aerial Video (if available)
   - Embedded from AWS S3 bucket
   - Auto-play, loop, muted settings
   - Fallback message if processing

3. 360° Panorama
   - Google Street View integration
   - Pannellum library implementation
   - Smart yaw calculation based on address:
     * Streets: Even buildings face north, odd face south
     * Avenues: Even face east, odd face west
     * Broadway: Diagonal adjustments

4. Satellite View
   - High-resolution aerial imagery
   - Building footprint visible

NAVIGATION FEATURES
------------------
• Previous/Next arrow buttons
• Dot indicators for slide position
• Fullscreen toggle button
• Auto-rotation disabled for user control

================================================================================
3. BUILDING DETAILS SECTION
================================================================================

PROPERTY INFORMATION
-------------------
• Owner: Company name with logo (if available)
• Property Manager: Company name with logo
• Owner Contact: Name • Phone (formatted)
• Manager Contact: Name • Phone (formatted)
• Percent Leased: Occupancy rate
• Number of Units: Total tenant count
• Number of Elevators: Count (if available)

PHYSICAL CHARACTERISTICS
-----------------------
• Total Area: Gross square footage
• Office Space: Square footage and percentage
• Typical Floor Size: Square footage
• Year Altered: Most recent renovation
• Operating Expense: $/SF (2024 data)

INFRASTRUCTURE
-------------
• Building Automation System (BAS):
  - Status indicator (Yes/No/Unknown)
  - Subsystems: Ventilation, Heating, Cooling
  - Color coding: Orange for heating, Blue for cooling
• Heating System Type: Equipment description
• Cooling System Type: Equipment description
• Equipment Counts:
  - Cooling towers
  - Water tanks

================================================================================
4. ENERGY USAGE VISUALIZATIONS
================================================================================

BUILDING ENERGY CHART
--------------------
• Type: Stacked bar chart (Plotly.js)
• Fuels: Electricity, Gas, Steam
• Timeline: 12 months of 2023 data
• Color scheme:
  - Electricity: Blue (#0066cc)
  - Gas: Orange (#ff6600)
  - Steam: Yellow (#ffc107)
• Only displays fuels with actual usage

OFFICE SPACE ENERGY CHART
------------------------
• Type: Grouped bar chart
• Shows office-specific consumption
• Same fuel types and colors as building chart
• Allows comparison with whole building usage

HVAC PERCENTAGE CHART
--------------------
• Type: Area chart with seasonal colors
• Shows HVAC as percentage of total electricity
• Seasonal zones:
  - Cool (Jan-Mar): Blue
  - Warm (Apr-Jun): Yellow
  - Hot (Jul-Sep): Red
  - Cold (Oct-Dec): Blue
• Typical range: 15-35%

================================================================================
5. COST ANALYSIS SECTION
================================================================================

BUILDING ENERGY COSTS
--------------------
• Monthly cost breakdown by fuel type
• Line chart with markers
• Annual total displayed below chart
• Same color scheme as usage charts

OFFICE SPACE COSTS
-----------------
• Office-specific monthly costs
• Grouped bar chart format
• Annual total caption
• Enables ROI calculations

================================================================================
6. ODCV SAVINGS VISUALIZATION
================================================================================

MONTHLY SAVINGS CHART
--------------------
• Type: Stacked bar chart
• Components:
  - Electricity savings (blue)
  - Gas savings (orange)
  - Steam savings (yellow)
• Annual total prominently displayed
• Based on occupancy-driven control ventilation

SAVINGS CALCULATION
------------------
• Uses real monthly data from hvac_office_energy_BIG.csv
• Accounts for seasonal variations
• Includes all three fuel types
• Conservative estimates based on industry standards

================================================================================
7. LL97 COMPLIANCE SECTION
================================================================================

COMPLIANCE STATUS
----------------
• 2024-2029 Period:
  - Status: Compliant/Non-Compliant
  - Annual penalty amount (if non-compliant)
  - Current emissions (tCO2e)
  - Emission limit (tCO2e)
  - Delta to compliance

• 2030-2034 Period:
  - Future compliance projection
  - Anticipated penalty
  - Stricter emission limits

LL33 ENERGY GRADE
----------------
• Letter grade (A-F, N/A)
• Color-coded badge:
  - A: Green (#4CAF50)
  - B: Yellow (#FFEB3B)
  - C: Orange (#FF9800)
  - D: Red (#F44336)
  - F: Gray (#9E9E9E)
  - N/A: Purple (#E1BEE7)

CARBON METRICS
-------------
• Total carbon emissions (tCO2e)
• Comparison to limits
• Reduction needed for compliance

================================================================================
8. ENERGY STAR SCORE
================================================================================

CURRENT PERFORMANCE
------------------
• Score display (1-100 scale)
• Color coding:
  - <50: Red (poor)
  - 50-74: Yellow (needs improvement)
  - 75+: Green (good)

TARGET COMPARISON
----------------
• Target score (typically 75)
• Delta calculation
• Visual indicator of gap/surplus
• Points needed for compliance

================================================================================
9. TENANT INFORMATION
================================================================================

TOP TENANTS TABLE
----------------
• Lists up to 10 largest tenants
• Sorted by square footage occupied
• Columns:
  - Tenant name
  - Square footage
  - Percentage of building
• Data source: Costar_Tenants file

================================================================================
10. AIR QUALITY MONITORING
================================================================================

PM2.5 CHART
----------
• 12-month historical data
• Business hours only (M-F, 8am-6pm)
• Data source: OpenWeatherMap API
• EPA thresholds:
  - Good: <12 μg/m³ (green line)
  - Moderate: 12-35.4 μg/m³ (yellow fill)
  - Unhealthy: >35.4 μg/m³ (red fill)

CACHING SYSTEM
-------------
• Proximity-based caching (400m radius)
• Reduces API calls for nearby buildings
• Stores: dates, values, labels, averages
• Significant performance optimization

COLOR ZONES
----------
• Blue fill: Base good air quality
• Yellow overlay: Moderate concern days
• Red overlay: Unhealthy air days
• Daily averages plotted as line

================================================================================
11. RANKING METHODOLOGY DISPLAY
================================================================================

SCORE BREAKDOWN (110 points total)
----------------------------------
Same as homepage but with building-specific values shown:

1. Financial Impact (40 pts): Based on total savings
2. BAS Infrastructure (30 pts): Binary gate + subsystems
3. Owner Portfolio (20 pts): Portfolio size bonus
4. Implementation Ease (10 pts): Inverse of tenant count
5. Prestige Bonuses (10 pts): LEED, Energy Star, Class A

Visual indicator shows how building scored in each category

================================================================================
12. TECHNICAL IMPLEMENTATION
================================================================================

DATA SOURCES
-----------
Primary CSV files:
• odcv_scoring.csv: Rankings and scores
• buildings_BIG.csv: Owner and property details
• LL97_BIG.csv: Compliance and penalties
• system_BIG.csv: BAS and HVAC systems
• energy_BIG.csv: Monthly energy usage
• hvac_office_energy_BIG.csv: ODCV savings
• office_energy_BIG.csv: Office-specific usage
• building_heights.csv: For panorama positioning
• equipment_counts.csv: Cooling towers, water tanks
• Costar_Tenants_*.csv: Tenant information
• aerial_videos.csv: Video availability status

EXTERNAL APIS
------------
• Google Maps: Street View panoramas (SERVER_API_KEY)
• OpenWeatherMap: PM2.5 air quality (OPENWEATHER_API_KEY)
• AWS S3: Aerial video storage and delivery

JAVASCRIPT LIBRARIES
-------------------
• Plotly.js: Interactive charts
• Pannellum: 360° panorama viewer
• Native HTML5: Video player

PERFORMANCE OPTIMIZATIONS
------------------------
• Video preloading with link rel="preload"
• PM2.5 data caching for proximity reuse
• Lazy loading for images
• Chart rendering on demand
• Responsive breakpoints

================================================================================
13. CONTACT INFORMATION FORMATTING
================================================================================

PHONE NUMBER PROCESSING
----------------------
• Formats 10-digit numbers as (XXX) XXX-XXXX
• Handles multiple sources (buildings.csv, CostarExport)
• Merges duplicate contacts intelligently
• Preserves email addresses when present

NAME EXTRACTION
--------------
• Parses "Name • Phone" format
• Handles multiple contacts with labels
• Shows both landlord and owner if different
• Clean formatting with bullet separators

================================================================================
14. LOGO MAPPING SYSTEM
================================================================================

AVAILABLE LOGOS
--------------
• 90+ company logos stored on GitHub
• Format: Company_Name.png (mostly)
• Special cases: .jpg for some companies
• Automatic height adjustment (30px default, 45px for Vornado)

MAPPING LOGIC
------------
• Removes apostrophes from names
• Replaces spaces with underscores
• Replaces " & " with "_"
• Exact match required for display

================================================================================
15. FOOTER SECTION
================================================================================

BUILD INFORMATION
----------------
• Generation timestamp
• Version number (Unix timestamp)
• Data freshness indicator

NAVIGATION
---------
• Back to homepage link
• Back to top floating button
• Smooth scroll implementation

================================================================================
16. ERROR HANDLING
================================================================================

MISSING DATA
-----------
• Graceful fallbacks for all fields
• "N/A" or "Unknown" defaults
• Charts hide missing fuel types
• Tenants section hidden if no data

API FAILURES
-----------
• PM2.5: Uses cached nearby data or skips
• Street View: Shows placeholder message
• Aerial Video: Displays processing message

FILE GENERATION
--------------
• Progress indicators every 50 buildings
• Error logging with BBL identification
• Continues processing on individual failures
• Summary statistics at completion

================================================================================
END OF BUILDING REPORT DOCUMENTATION
================================================================================

Document Generated: 2025-08-06
Coverage: 585 NYC Buildings
Report Features: Complete
Generated By: building.py script