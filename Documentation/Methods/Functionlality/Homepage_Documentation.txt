================================================================================
NYC ODCV PROSPECTOR - HOMEPAGE DOCUMENTATION
================================================================================

OVERVIEW
--------
The NYC ODCV Prospector homepage (index.html) serves as the primary dashboard for 
sales teams to identify and prioritize energy efficiency opportunities across 
585+ NYC commercial buildings. Generated by homepage.py, it provides a comprehensive 
ranking system based on "sales readiness" rather than pure savings amounts.

================================================================================
1. HOMEPAGE STRUCTURE & LAYOUT
================================================================================

HEADER SECTION
--------------
• R-Zero branding with logo (links to rzero.com)
• Main title: "Prospector: NYC"
• Subtitle: "ODCV Opportunities"
• Blue gradient background using R-Zero brand image

KEY STATISTICS DASHBOARD
------------------------
Three prominent metric cards displaying:
1. Total Year One Savings: $75.3M (green text)
   - Aggregate ODCV savings across all analyzed buildings
2. Buildings Facing 2026 LL97 Penalties: 32 (red text)
   - Count of buildings with imminent compliance issues
3. Buildings with BMS: 470 (blue text)
   - Infrastructure-ready buildings

================================================================================
2. TOP PORTFOLIOS SECTION
================================================================================

PURPOSE
-------
Highlights the three largest building portfolios for enterprise sales opportunities

FEATURED PORTFOLIOS
------------------
1. Vornado Realty Trust
   - 42 buildings
   - $7.1M total savings
   - Company logo displayed

2. SL Green Realty
   - 26 buildings
   - $6.7M total savings
   - Company logo displayed

3. Kaufman Organization
   - 23 buildings
   - $1.7M total savings
   - Company logo displayed

INTERACTIVE FEATURES
-------------------
• Click-to-filter: Clicking a portfolio tile filters the main table
• Visual feedback on hover (lift effect, shadow, color change)
• Selected state: Blue border, scaled up slightly
• Portfolio logos positioned in top-right corner of tiles

================================================================================
3. RANKING METHODOLOGY (COLLAPSIBLE SECTION)
================================================================================

110-POINT SCORING SYSTEM BREAKDOWN
----------------------------------

1. FINANCIAL IMPACT (40 points)
   • ODCV annual savings scaled to portfolio
   • LL97 penalty avoidance value
   • Total present value calculations
   • Formula: 40 × ((586 - rank) / 585)

2. BAS INFRASTRUCTURE (30 points)
   • Binary gate: No BAS = 0 points (deal breaker)
   • Has BAS: 15 base points
   • Heating automation: +2.5 points if YES, -1 if NO
   • Cooling automation: +2.5 points if YES, -1 if NO
   • Year altered bonus: 0-10 points based on renovation recency

3. OWNER PORTFOLIO (20 points)
   • 10+ buildings: 15 points
   • 5-9 buildings: 10 points
   • 2-4 buildings: 6 points
   • 1 building: 3 points
   • Property manager adds 1-5 points based on portfolio size

4. IMPLEMENTATION EASE (10 points)
   • Inverse correlation with tenant count
   • 1-5 units: 5 points (easiest)
   • 6-10 units: 4 points
   • 11-20 units: 3 points
   • 21-50 units: 2 points
   • 51+ units: 0 points (most complex)

5. PRESTIGE BONUSES (10 points)
   • LEED certification: +3 points
   • Energy Star certified: +3 points
   • Class A building: +4 points

KEY PRINCIPLE
------------
"Sales Readiness > Pure Savings Amount"
Example: $1.4M savings with no BAS ranks below $500K with perfect infrastructure

================================================================================
4. OFFICE OCCUPANCY TRENDS (COLLAPSIBLE CHART)
================================================================================

CHART DETAILS
------------
• Type: Line chart using Chart.js
• Timeline: January 2020 - June 2025
• Update frequency: Monthly data points

DATA SERIES
----------
1. NYC: 76% current occupancy (blue line)
2. US Average: 66% current occupancy (red line)
3. San Francisco: 47% current occupancy (teal line)

KEY INSIGHTS
-----------
• Shows recovery from pandemic lows (~17-18% in 2020)
• NYC's 10% advantage over national average
• Context for ODCV opportunity sizing
• Interactive tooltips on hover

================================================================================
5. SEARCH & FILTER FUNCTIONALITY
================================================================================

SEARCH CAPABILITIES
------------------
• Multi-field search across:
  - Building addresses (all variations)
  - Building names and aliases
  - Owner company names
  - Property manager names
  - BBL (Borough-Block-Lot) numbers

ADDRESS NORMALIZATION
--------------------
• Handles NYC-specific formats:
  - "W 42nd St" = "West 42nd Street" = "W 42 Street"
  - "6th Avenue" → "Ave Of The Americas"
  - Numbered streets (1st-200th+)
  - Direction abbreviations (N/S/E/W)

GOOGLE PLACES INTEGRATION
-------------------------
• Autocomplete for address search
• Combined with local address database
• Dropdown appears above sticky table headers (z-index: 10001)

FILTER CONTROLS
--------------
• Clear Filter button:
  - Disabled (gray) by default
  - Activates (red) when filters applied
  - Clears all active filters

• Results counter:
  - Shows "Showing X of 587 buildings"
  - Updates dynamically during filtering

================================================================================
6. BUILDING RANKINGS TABLE
================================================================================

TABLE STRUCTURE
--------------
• Sticky header for scrolling (z-index: 100)
• Sortable columns with indicators
• Alternating row colors for readability
• Hover effects (light blue background)

COLUMNS
-------
1. Image: 70x70px thumbnail from GitHub
   - Fallback "No image" placeholder
   
2. Rank: Blue badge (#1-585)
   - Top 10 get special highlighting
   
3. Building: Address with Wikipedia links where available
   
4. Owner: Clickable to filter by owner
   
5. Manager: Clickable to filter by manager
   
6. Savings: Color-coded by amount
   - High (>$500K): Green with star icon for top 10
   - Medium ($200-500K): Green
   - Low (<$200K): Green
   
7. Score: Numerical value (0-110 scale)
   
8. Details: Arrow link to building report page

ROW FEATURES
-----------
• Entire row clickable to view building details
• Data-search attribute for filtering
• Data-occupancy attribute for occupancy rates
• Wikipedia links open in new tab

================================================================================
7. EXPORT FUNCTIONALITY
================================================================================

CSV EXPORT
----------
• Green button labeled "Export CSV"
• Includes all visible (filtered) table data
• Preserves current sort order
• Filename: "nyc_odcv_buildings_export.csv"

EXPORTED FIELDS
--------------
• Rank
• Building address
• Owner name
• Property manager
• Annual savings
• Total score

================================================================================
8. TECHNICAL IMPLEMENTATION
================================================================================

DATA ATTRIBUTES
--------------
• Each table row contains searchable text in data-search attribute
• Includes all address variations for comprehensive search
• Occupancy data stored in data-occupancy attribute

JAVASCRIPT FEATURES
------------------
• Address normalization functions
• Portfolio filtering with visual selection states
• Table sorting (all columns)
• CSV export generation
• Aerial video URL management (sessionStorage)
• Debounced search for performance

PERFORMANCE OPTIMIZATIONS
------------------------
• Lazy loading for images
• SessionStorage for video URL caching
• Responsive breakpoint at 768px
• Print styles hide interactive elements

================================================================================
9. FOOTER SECTION
================================================================================

BUILD INFORMATION
----------------
• Timestamp showing when page was generated
• Format: "Build: [Date] [Time] CST"
• Example: "Build: 6 Aug 2025 09:36:06 AM CST"

LINKS PROVIDED
-------------
1. Report an issue (Google Sheets)
2. Request a feature (Google Sheets)
3. Download source data (Google Drive)

BACK TO TOP BUTTON
-----------------
• Floating button (bottom-right corner)
• Appears on scroll
• Smooth scroll to top on click

================================================================================
10. DATA SOURCES FOR HOMEPAGE
================================================================================

PRIMARY DATA FILES
-----------------
• odcv_scoring.csv: Rankings and total scores
• buildings_BIG.csv: Owner and manager information
• all_building_addresses.csv: Address variations for search
• LL97_BIG.csv: Penalty data for statistics
• system_BIG.csv: BAS presence for statistics
• NYC_Wiki_Pages_Buildings_with_BBL_verified.csv: Wikipedia links
• aerial_videos.csv: Video availability for sessionStorage

CALCULATED METRICS
-----------------
• Total savings: Sum of all building ODCV savings
• Urgent buildings: Count where 2026 penalties > 0
• BAS buildings: Count where BAS = "YES"

================================================================================
END OF HOMEPAGE DOCUMENTATION
================================================================================

Document Generated: 2025-08-06
Based on: 587 NYC Buildings Analysis
Homepage Features: Complete